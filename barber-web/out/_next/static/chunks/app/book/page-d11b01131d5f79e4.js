(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[886],{3039:function(e,t,s){Promise.resolve().then(s.bind(s,5267))},401:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},9376:function(e,t,s){"use strict";var a=s(5475);s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}})},5267:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return u}});var a=s(7437),l=s(2265),n=s(9376),r=s(5526),i=s(2593),o=s(2920);let c=(0,s(9763).Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);var d=s(401);function u(){let e=(0,n.useRouter)(),[t,s]=(0,l.useState)(1),[u,m]=(0,l.useState)([]),[x,h]=(0,l.useState)([]),[b,f]=(0,l.useState)(null),[g,j]=(0,l.useState)(null),[p,w]=(0,l.useState)(""),[N,v]=(0,l.useState)(""),[y,k]=(0,l.useState)(!0),[C,S]=(0,l.useState)(!1);(0,l.useEffect)(()=>{(async()=>{let{data:e}=await r.O.from("services").select("*"),{data:t}=await r.O.from("barbers").select("*");e&&m(e),t&&h(t),k(!1)})()},[]);let _=()=>s(t+1),O=()=>s(t-1),D=async()=>{S(!0);try{let{data:{user:t}}=await r.O.auth.getUser();if(!t)throw Error("User not authenticated");let s=new Date("".concat(p,"T").concat(N,":00")).toISOString(),{error:a}=await r.O.from("bookings").insert({client_id:t.id,service_id:null==b?void 0:b.id,barber_id:null==g?void 0:g.id,booking_date:s,status:"pending"});if(a)throw a;e.push("/dashboard")}catch(e){console.error("Error booking:",e),alert("Erro ao realizar agendamento. Tente novamente.")}finally{S(!1)}};return y?(0,a.jsx)("div",{className:"min-h-screen bg-dark-bg flex items-center justify-center text-gold",children:"Carregando..."}):(0,a.jsx)("div",{className:"min-h-screen bg-dark-bg p-4 md:p-8",children:(0,a.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,a.jsxs)("header",{className:"flex items-center mb-8",children:[(0,a.jsx)("button",{onClick:()=>1===t?e.back():O(),className:"text-white hover:text-gold mr-4",children:(0,a.jsx)(c,{})}),(0,a.jsx)("h1",{className:"text-2xl font-bold text-white",children:"Novo Agendamento"})]}),(0,a.jsxs)("div",{className:"flex justify-between mb-8 relative",children:[(0,a.jsx)("div",{className:"absolute top-1/2 left-0 w-full h-0.5 bg-gray-800 -z-10"}),[1,2,3,4].map(e=>(0,a.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm transition-colors\n              ".concat(t>=e?"bg-gold text-black":"bg-gray-800 text-gray-400"),children:e},e))]}),1===t&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h2",{className:"text-xl text-white font-semibold mb-4",children:"Escolha o Servi\xe7o"}),u.map(e=>(0,a.jsxs)(i.W,{onClick:()=>f(e),className:"p-4 cursor-pointer transition-all hover:border-gold/50 flex justify-between items-center\n                  ".concat((null==b?void 0:b.id)===e.id?"border-gold bg-gold/10":""),children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-white font-bold",children:e.name}),(0,a.jsxs)("p",{className:"text-gray-400 text-sm",children:[e.duration_minutes," min â€¢ R$ ",e.price]})]}),(null==b?void 0:b.id)===e.id&&(0,a.jsx)(d.Z,{className:"text-gold"})]},e.id)),(0,a.jsx)(o.g,{disabled:!b,onClick:_,className:"mt-8",children:"Continuar"})]}),2===t&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h2",{className:"text-xl text-white font-semibold mb-4",children:"Escolha o Barbeiro"}),x.map(e=>(0,a.jsxs)(i.W,{onClick:()=>j(e),className:"p-4 cursor-pointer transition-all hover:border-gold/50 flex items-center gap-4\n                  ".concat((null==g?void 0:g.id)===e.id?"border-gold bg-gold/10":""),children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-full bg-gray-700 overflow-hidden",children:e.photo_url?(0,a.jsx)("img",{src:e.photo_url,alt:e.name,className:"w-full h-full object-cover"}):(0,a.jsx)("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:"?"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h3",{className:"text-white font-bold",children:e.name}),(0,a.jsx)("p",{className:"text-gray-400 text-sm",children:e.specialty})]}),(null==g?void 0:g.id)===e.id&&(0,a.jsx)(d.Z,{className:"text-gold"})]},e.id)),(0,a.jsx)(o.g,{disabled:!g,onClick:_,className:"mt-8",children:"Continuar"})]}),3===t&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h2",{className:"text-xl text-white font-semibold mb-4",children:"Data e Hora"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-gray-400 mb-2",children:"Data"}),(0,a.jsx)("input",{type:"date",min:new Date().toISOString().split("T")[0],value:p,onChange:e=>w(e.target.value),className:"w-full bg-white/5 border border-white/10 rounded-lg px-4 py-3 text-white focus:border-gold outline-none"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-gray-400 mb-2",children:"Hor\xe1rio"}),(0,a.jsx)("div",{className:"grid grid-cols-4 gap-2",children:["09:00","10:00","11:00","13:00","14:00","15:00","16:00","17:00","18:00"].map(e=>(0,a.jsx)("button",{onClick:()=>v(e),className:"p-2 rounded-lg text-sm font-medium transition-colors\n                      ".concat(N===e?"bg-gold text-black":"bg-white/5 text-white hover:bg-white/10"),children:e},e))})]}),(0,a.jsx)(o.g,{disabled:!p||!N,onClick:_,className:"mt-8",children:"Continuar"})]}),4===t&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h2",{className:"text-xl text-white font-semibold mb-4",children:"Confirmar Agendamento"}),(0,a.jsxs)(i.W,{className:"p-6 space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-between border-b border-white/10 pb-4",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Servi\xe7o"}),(0,a.jsx)("span",{className:"text-white font-medium",children:null==b?void 0:b.name})]}),(0,a.jsxs)("div",{className:"flex justify-between border-b border-white/10 pb-4",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Barbeiro"}),(0,a.jsx)("span",{className:"text-white font-medium",children:null==g?void 0:g.name})]}),(0,a.jsxs)("div",{className:"flex justify-between border-b border-white/10 pb-4",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Data"}),(0,a.jsx)("span",{className:"text-white font-medium",children:new Date(p).toLocaleDateString("pt-BR")})]}),(0,a.jsxs)("div",{className:"flex justify-between border-b border-white/10 pb-4",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Hor\xe1rio"}),(0,a.jsx)("span",{className:"text-white font-medium",children:N})]}),(0,a.jsxs)("div",{className:"flex justify-between pt-2",children:[(0,a.jsx)("span",{className:"text-gold font-bold text-lg",children:"Total"}),(0,a.jsxs)("span",{className:"text-gold font-bold text-lg",children:["R$ ",null==b?void 0:b.price]})]})]}),(0,a.jsx)(o.g,{onClick:D,isLoading:C,className:"mt-8",children:"Confirmar Agendamento"})]})]})})}},2593:function(e,t,s){"use strict";s.d(t,{W:function(){return n}});var a=s(7437),l=s(3448);function n(e){let{children:t,className:s,...n}=e;return(0,a.jsx)("div",{className:(0,l.cn)("backdrop-blur-md bg-white/10 border border-white/20 rounded-xl shadow-xl",s),...n,children:t})}},2920:function(e,t,s){"use strict";s.d(t,{g:function(){return r}});var a=s(7437),l=s(3448);let n=(0,s(9763).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);function r(e){let{children:t,className:s,isLoading:r,disabled:i,...o}=e;return(0,a.jsxs)("button",{disabled:i||r,className:(0,l.cn)("w-full bg-gradient-to-r from-[#D4AF37] to-[#F2D06B] text-black font-bold py-3 px-6 rounded-lg shadow-lg hover:shadow-gold/50 transition-all active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",s),...o,children:[r&&(0,a.jsx)(n,{className:"mr-2 h-4 w-4 animate-spin"}),t]})}},5526:function(e,t,s){"use strict";s.d(t,{O:function(){return a}});let a=(0,s(1695).createBrowserClient)("https://zynmvmxdluevuwigbadz.supabase.co","sb_publishable_9w0K7O3Sun2zl2qIQwX33g_wGkVsy6f")},3448:function(e,t,s){"use strict";s.d(t,{cn:function(){return n}});var a=s(1994),l=s(3335);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,l.m6)((0,a.W)(t))}}},function(e){e.O(0,[554,695,971,117,744],function(){return e(e.s=3039)}),_N_E=e.O()}]);