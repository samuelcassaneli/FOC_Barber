(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[596],{9370:function(e,t,a){Promise.resolve().then(a.bind(a,8452))},2660:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9763).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},1047:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9763).Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},5302:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9763).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},6595:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9763).Z)("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]])},5805:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9763).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},7648:function(e,t,a){"use strict";a.d(t,{default:function(){return r.a}});var s=a(2972),r=a.n(s)},9376:function(e,t,a){"use strict";var s=a(5475);a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}})},8452:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return h}});var s=a(7437),r=a(2265),i=a(9376),n=a(5526),l=a(2593),c=a(2660),d=a(5805),o=a(1047),u=a(6595),x=a(5302);let m=(0,a(9763).Z)("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);var f=a(7648);function h(){let e=(0,i.useRouter)(),[t,a]=(0,r.useState)(!0),[h,b]=(0,r.useState)([]);(0,r.useEffect)(()=>{(async()=>{let{data:{user:t}}=await n.O.auth.getUser();if(!t||"aiucmt.kiaaivmtq@gmail.com"!==t.email){e.push("/dashboard");return}let{data:s}=await n.O.from("barbers").select("\n          id, is_available, rating,\n          profile:profiles!barbers_profile_id_fkey(full_name, email, avatar_url)\n        ");b(await Promise.all((s||[]).map(async e=>{let{count:t}=await n.O.from("bookings").select("*",{count:"exact"}).eq("barber_id",e.id);return{...e,profile:Array.isArray(e.profile)?e.profile[0]:e.profile,bookings_count:t||0}}))),a(!1)})()},[e]);let g=async(e,t)=>{await n.O.from("barbers").update({is_available:!t}).eq("id",e),b(h.map(a=>a.id===e?{...a,is_available:!t}:a))};return t?(0,s.jsx)("div",{className:"min-h-screen bg-dark-bg flex items-center justify-center text-gold",children:"Carregando..."}):(0,s.jsx)("div",{className:"min-h-screen bg-dark-bg p-8",children:(0,s.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,s.jsx)("header",{className:"flex justify-between items-center mb-8",children:(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)(f.default,{href:"/admin",className:"p-2 rounded-lg hover:bg-white/10",children:(0,s.jsx)(c.Z,{className:"w-6 h-6 text-white"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-white",children:"Gerenciar Barbearias"}),(0,s.jsxs)("p",{className:"text-gray-400",children:[h.length," barbeiros cadastrados"]})]})]})}),(0,s.jsx)("div",{className:"grid gap-4",children:0===h.length?(0,s.jsxs)(l.W,{className:"p-8 text-center",children:[(0,s.jsx)(d.Z,{className:"w-12 h-12 text-gray-500 mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-gray-400",children:"Nenhum barbeiro cadastrado."})]}):h.map(e=>{var t,a,r,i;return(0,s.jsx)(l.W,{className:"p-4 ".concat(e.is_available?"":"opacity-60"),children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"w-12 h-12 rounded-full bg-gold/20 flex items-center justify-center",children:(null===(t=e.profile)||void 0===t?void 0:t.avatar_url)?(0,s.jsx)("img",{src:e.profile.avatar_url,alt:"",className:"w-12 h-12 rounded-full object-cover"}):(0,s.jsx)(d.Z,{className:"w-6 h-6 text-gold"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-white",children:(null===(a=e.profile)||void 0===a?void 0:a.full_name)||"Sem nome"}),(0,s.jsx)("p",{className:"text-sm text-gray-400",children:null===(r=e.profile)||void 0===r?void 0:r.email}),(0,s.jsxs)("div",{className:"flex gap-4 mt-1 text-sm",children:[(0,s.jsxs)("span",{className:"flex items-center gap-1 text-gray-400",children:[(0,s.jsx)(o.Z,{className:"w-3 h-3"})," ",e.bookings_count," agendamentos"]}),(0,s.jsxs)("span",{className:"flex items-center gap-1 text-yellow-400",children:[(0,s.jsx)(u.Z,{className:"w-3 h-3"})," ",(null===(i=e.rating)||void 0===i?void 0:i.toFixed(1))||"N/A"]})]})]})]}),(0,s.jsx)("div",{className:"flex items-center gap-2",children:(0,s.jsx)("button",{onClick:()=>g(e.id,e.is_available),className:"flex items-center gap-2 px-4 py-2 rounded-lg text-sm ".concat(e.is_available?"bg-green-500/20 text-green-400 hover:bg-green-500/30":"bg-red-500/20 text-red-400 hover:bg-red-500/30"),children:e.is_available?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(x.Z,{className:"w-4 h-4"})," Ativo"]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(m,{className:"w-4 h-4"})," Inativo"]})})})]})},e.id)})})]})})}},2593:function(e,t,a){"use strict";a.d(t,{W:function(){return i}});var s=a(7437),r=a(3448);function i(e){let{children:t,className:a,...i}=e;return(0,s.jsx)("div",{className:(0,r.cn)("backdrop-blur-md bg-white/10 border border-white/20 rounded-xl shadow-xl",a),...i,children:t})}},5526:function(e,t,a){"use strict";a.d(t,{O:function(){return s}});let s=(0,a(1695).createBrowserClient)("https://zynmvmxdluevuwigbadz.supabase.co","sb_publishable_9w0K7O3Sun2zl2qIQwX33g_wGkVsy6f")},3448:function(e,t,a){"use strict";a.d(t,{cn:function(){return i}});var s=a(1994),r=a(3335);function i(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.m6)((0,s.W)(t))}}},function(e){e.O(0,[554,695,972,971,117,744],function(){return e(e.s=9370)}),_N_E=e.O()}]);