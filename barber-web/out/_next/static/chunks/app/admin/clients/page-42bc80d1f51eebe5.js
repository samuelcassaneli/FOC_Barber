(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[500],{2241:function(e,t,s){Promise.resolve().then(s.bind(s,576))},2660:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},1047:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},9345:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},3247:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},7648:function(e,t,s){"use strict";s.d(t,{default:function(){return r.a}});var a=s(2972),r=s.n(a)},9376:function(e,t,s){"use strict";var a=s(5475);s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}})},576:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return h}});var a=s(7437),r=s(2265),n=s(9376),l=s(5526),i=s(2593),c=s(2660),d=s(3247);let u=(0,s(9763).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);var o=s(9345),x=s(1047),m=s(7648);function h(){let e=(0,n.useRouter)(),[t,s]=(0,r.useState)(!0),[h,f]=(0,r.useState)([]),[p,g]=(0,r.useState)("");(0,r.useEffect)(()=>{(async()=>{let{data:{user:t}}=await l.O.auth.getUser();if(!t||"aiucmt.kiaaivmtq@gmail.com"!==t.email){e.push("/dashboard");return}let{data:a}=await l.O.from("profiles").select("id, full_name, email, avatar_url, created_at").eq("role","client").order("created_at",{ascending:!1});f(await Promise.all((a||[]).map(async e=>{let{count:t}=await l.O.from("bookings").select("*",{count:"exact"}).eq("client_id",e.id);return{...e,bookings_count:t||0}}))),s(!1)})()},[e]);let y=h.filter(e=>{var t,s;return(null===(t=e.full_name)||void 0===t?void 0:t.toLowerCase().includes(p.toLowerCase()))||(null===(s=e.email)||void 0===s?void 0:s.toLowerCase().includes(p.toLowerCase()))});return t?(0,a.jsx)("div",{className:"min-h-screen bg-dark-bg flex items-center justify-center text-gold",children:"Carregando..."}):(0,a.jsx)("div",{className:"min-h-screen bg-dark-bg p-8",children:(0,a.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,a.jsx)("header",{className:"flex justify-between items-center mb-8",children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(m.default,{href:"/admin",className:"p-2 rounded-lg hover:bg-white/10",children:(0,a.jsx)(c.Z,{className:"w-6 h-6 text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-white",children:"Gerenciar Clientes (LGPD)"}),(0,a.jsxs)("p",{className:"text-gray-400",children:[h.length," clientes cadastrados"]})]})]})}),(0,a.jsx)(i.W,{className:"p-4 mb-6",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(d.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,a.jsx)("input",{type:"text",placeholder:"Buscar por nome ou email...",value:p,onChange:e=>g(e.target.value),className:"w-full pl-10 pr-4 py-3 rounded-lg bg-white/5 border border-white/10 text-white placeholder-gray-500"})]})}),(0,a.jsx)("div",{className:"grid gap-4",children:0===y.length?(0,a.jsxs)(i.W,{className:"p-8 text-center",children:[(0,a.jsx)(u,{className:"w-12 h-12 text-gray-500 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-400",children:p?"Nenhum cliente encontrado.":"Nenhum cliente cadastrado."})]}):y.map(e=>(0,a.jsx)(i.W,{className:"p-4",children:(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-full bg-purple-500/20 flex items-center justify-center",children:e.avatar_url?(0,a.jsx)("img",{src:e.avatar_url,alt:"",className:"w-12 h-12 rounded-full object-cover"}):(0,a.jsx)(u,{className:"w-6 h-6 text-purple-400"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-white",children:e.full_name||"Sem nome"}),(0,a.jsxs)("p",{className:"text-sm text-gray-400 flex items-center gap-1",children:[(0,a.jsx)(o.Z,{className:"w-3 h-3"})," ",e.email]}),(0,a.jsxs)("div",{className:"flex gap-4 mt-1 text-sm",children:[(0,a.jsxs)("span",{className:"flex items-center gap-1 text-gray-400",children:[(0,a.jsx)(x.Z,{className:"w-3 h-3"})," ",e.bookings_count," agendamentos"]}),(0,a.jsxs)("span",{className:"text-gray-500",children:["Desde ",new Date(e.created_at).toLocaleDateString("pt-BR")]})]})]})]})})},e.id))}),(0,a.jsx)(i.W,{className:"p-4 mt-8 bg-blue-500/10 border-blue-500/20",children:(0,a.jsxs)("p",{className:"text-blue-300 text-sm",children:[(0,a.jsx)("strong",{children:"Aviso LGPD:"})," Os dados exibidos aqui s\xe3o protegidos pela Lei Geral de Prote\xe7\xe3o de Dados. Utilize apenas para fins de gest\xe3o do sistema."]})})]})})}},2593:function(e,t,s){"use strict";s.d(t,{W:function(){return n}});var a=s(7437),r=s(3448);function n(e){let{children:t,className:s,...n}=e;return(0,a.jsx)("div",{className:(0,r.cn)("backdrop-blur-md bg-white/10 border border-white/20 rounded-xl shadow-xl",s),...n,children:t})}},5526:function(e,t,s){"use strict";s.d(t,{O:function(){return a}});let a=(0,s(1695).createBrowserClient)("https://zynmvmxdluevuwigbadz.supabase.co","sb_publishable_9w0K7O3Sun2zl2qIQwX33g_wGkVsy6f")},3448:function(e,t,s){"use strict";s.d(t,{cn:function(){return n}});var a=s(1994),r=s(3335);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.m6)((0,a.W)(t))}}},function(e){e.O(0,[554,695,972,971,117,744],function(){return e(e.s=2241)}),_N_E=e.O()}]);