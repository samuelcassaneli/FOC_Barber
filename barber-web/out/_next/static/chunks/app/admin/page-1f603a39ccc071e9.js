(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{1353:function(e,t,a){Promise.resolve().then(a.bind(a,9449))},1047:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9763).Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},9397:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9763).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},292:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9763).Z)("Scissors",[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]])},8906:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9763).Z)("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]])},4413:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9763).Z)("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2v0a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12v0a2 2 0 0 1-2-2V7",key:"jon5kx"}]])},5805:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9763).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},7648:function(e,t,a){"use strict";a.d(t,{default:function(){return r.a}});var s=a(2972),r=a.n(s)},9376:function(e,t,a){"use strict";var s=a(5475);a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}})},9449:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return j}});var s=a(7437),r=a(2265),n=a(5526),l=a(2593),i=a(9376),c=a(7648),o=a(8906),d=a(9763);let x=(0,d.Z)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var h=a(4413),u=a(292),m=a(5805),f=a(1047),g=a(9397);let b=(0,d.Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),p=(0,d.Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);function j(){let e=(0,i.useRouter)(),[t,a]=(0,r.useState)({totalBarbershops:0,totalBarbers:0,totalClients:0,totalBookings:0,todayBookings:0,monthRevenue:0,activePlans:0}),[d,j]=(0,r.useState)([]),[N,w]=(0,r.useState)(!0);(0,r.useEffect)(()=>{k(),Z()},[]);let k=async()=>{let{data:{user:t}}=await n.O.auth.getUser();if(!t){e.push("/auth");return}let{data:a}=await n.O.from("profiles").select("role").eq("id",t.id).single();a&&"admin"===a.role||e.push("/auth")},Z=async()=>{w(!0);let{count:e}=await n.O.from("barbershops").select("*",{count:"exact",head:!0}),{count:t}=await n.O.from("barbers").select("*",{count:"exact",head:!0}),{count:s}=await n.O.from("clients").select("*",{count:"exact",head:!0}),{count:r}=await n.O.from("barbershop_bookings").select("*",{count:"exact",head:!0}),l=new Date;l.setHours(0,0,0,0);let i=new Date(l);i.setDate(i.getDate()+1);let{count:c}=await n.O.from("barbershop_bookings").select("*",{count:"exact",head:!0}).gte("start_time",l.toISOString()).lt("start_time",i.toISOString()),{count:o}=await n.O.from("client_subscriptions").select("*",{count:"exact",head:!0}).eq("is_active",!0),{data:d}=await n.O.from("barbershops").select("*").order("created_at",{ascending:!1}).limit(5),x=new Date(l.getFullYear(),l.getMonth(),1),h=new Date(l.getFullYear(),l.getMonth()+1,0,23,59,59,999),{data:u,error:m}=await n.O.from("financial_transactions").select("amount").gte("created_at",x.toISOString()).lt("created_at",h.toISOString());m&&console.error("Error fetching financial transactions:",m),a({totalBarbershops:e||0,totalBarbers:t||0,totalClients:s||0,totalBookings:r||0,todayBookings:c||0,monthRevenue:(null==u?void 0:u.reduce((e,t)=>e+t.amount,0))||0,activePlans:o||0}),j(d||[]),w(!1)};return N?(0,s.jsx)("div",{className:"min-h-screen bg-dark-bg flex items-center justify-center",children:(0,s.jsx)("div",{className:"text-gold text-xl",children:"Carregando Painel Admin..."})}):(0,s.jsxs)("div",{className:"min-h-screen bg-dark-bg",children:[(0,s.jsx)("header",{className:"bg-dark-card border-b border-white/10 px-8 py-4",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto flex justify-between items-center",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(o.Z,{className:"text-gold",size:28}),(0,s.jsx)("h1",{className:"text-2xl font-bold text-white",children:"FOC Barber Admin"})]}),(0,s.jsxs)("nav",{className:"flex gap-6",children:[(0,s.jsx)(c.default,{href:"/admin",className:"text-gold font-medium",children:"Dashboard"}),(0,s.jsx)(c.default,{href:"/admin/barbershops",className:"text-gray-400 hover:text-white transition",children:"Barbearias"}),(0,s.jsx)(c.default,{href:"/admin/users",className:"text-gray-400 hover:text-white transition",children:"Usu\xe1rios"}),(0,s.jsx)(c.default,{href:"/admin/financial",className:"text-gray-400 hover:text-white transition",children:"Financeiro"}),(0,s.jsx)(c.default,{href:"/admin/settings",className:"text-gray-400 hover:text-white transition",children:(0,s.jsx)(x,{size:20})})]})]})}),(0,s.jsxs)("main",{className:"max-w-7xl mx-auto p-8",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6 mb-10",children:[(0,s.jsx)(v,{icon:(0,s.jsx)(h.Z,{className:"text-gold"}),label:"Barbearias",value:t.totalBarbershops,trend:"+2 este m\xeas"}),(0,s.jsx)(v,{icon:(0,s.jsx)(u.Z,{className:"text-blue-400"}),label:"Barbeiros",value:t.totalBarbers}),(0,s.jsx)(v,{icon:(0,s.jsx)(m.Z,{className:"text-green-400"}),label:"Clientes",value:t.totalClients}),(0,s.jsx)(v,{icon:(0,s.jsx)(f.Z,{className:"text-purple-400"}),label:"Agendamentos Hoje",value:t.todayBookings})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,s.jsxs)("div",{className:"lg:col-span-2",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-white",children:"Barbearias Recentes"}),(0,s.jsxs)(c.default,{href:"/admin/barbershops/new",className:"flex items-center gap-2 bg-gold text-black px-4 py-2 rounded-lg font-medium hover:bg-gold/90 transition",children:[(0,s.jsx)(g.Z,{size:18}),"Nova Barbearia"]})]}),(0,s.jsx)("div",{className:"space-y-4",children:0===d.length?(0,s.jsxs)(l.W,{className:"p-8 text-center",children:[(0,s.jsx)(h.Z,{className:"mx-auto text-gray-500 mb-4",size:48}),(0,s.jsx)("p",{className:"text-gray-400",children:"Nenhuma barbearia cadastrada"}),(0,s.jsx)(c.default,{href:"/admin/barbershops/new",className:"inline-block mt-4 text-gold hover:underline",children:"Cadastrar primeira barbearia"})]}):d.map(e=>(0,s.jsx)(c.default,{href:"/admin/barbershops/".concat(e.id),children:(0,s.jsx)(l.W,{className:"p-4 hover:bg-white/5 transition cursor-pointer group",children:(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"w-12 h-12 bg-gold/20 rounded-full flex items-center justify-center",children:(0,s.jsx)(h.Z,{className:"text-gold",size:24})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-bold text-white",children:e.name}),(0,s.jsxs)("p",{className:"text-sm text-gray-400",children:[e.city||"Sem localiza\xe7\xe3o"," â€¢ ",e.slug]})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("span",{className:"px-3 py-1 rounded-full text-xs ".concat(e.is_active?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"),children:e.is_active?"Ativo":"Inativo"}),(0,s.jsx)(b,{className:"text-gray-500 group-hover:text-gold transition"})]})]})})},e.id))}),d.length>0&&(0,s.jsx)(c.default,{href:"/admin/barbershops",className:"block text-center mt-4 text-gold hover:underline",children:"Ver todas as barbearias"})]}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)(l.W,{className:"p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-bold text-white mb-4",children:"A\xe7\xf5es R\xe1pidas"}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)(y,{href:"/admin/barbershops/new",icon:(0,s.jsx)(g.Z,{}),label:"Nova Barbearia"}),(0,s.jsx)(y,{href:"/admin/reports",icon:(0,s.jsx)(p,{}),label:"Ver Relat\xf3rios"}),(0,s.jsx)(y,{href:"/admin/settings",icon:(0,s.jsx)(x,{}),label:"Configura\xe7\xf5es"})]})]}),(0,s.jsxs)(l.W,{className:"p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-bold text-white mb-4",children:"Resumo do M\xeas"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-400",children:"Total de Agendamentos"}),(0,s.jsx)("span",{className:"text-white font-bold",children:t.totalBookings})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-400",children:"Assinaturas Ativas"}),(0,s.jsx)("span",{className:"text-green-400 font-bold",children:t.activePlans})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-400",children:"Novos Clientes"}),(0,s.jsx)("span",{className:"text-blue-400 font-bold",children:"-"})]})]})]})]})]})]})]})}function v(e){let{icon:t,label:a,value:r,trend:n}=e;return(0,s.jsxs)(l.W,{className:"p-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[t,(0,s.jsx)("span",{className:"text-gray-400 text-sm",children:a})]}),(0,s.jsx)("div",{className:"text-3xl font-bold text-white",children:r}),n&&(0,s.jsx)("p",{className:"text-xs text-green-400 mt-1",children:n})]})}function y(e){let{href:t,icon:a,label:r}=e;return(0,s.jsxs)(c.default,{href:t,className:"flex items-center gap-3 p-3 rounded-lg hover:bg-white/5 transition group",children:[(0,s.jsx)("div",{className:"text-gold",children:a}),(0,s.jsx)("span",{className:"text-gray-300 group-hover:text-white transition",children:r}),(0,s.jsx)(b,{className:"ml-auto text-gray-500 group-hover:text-gold transition",size:18})]})}},2593:function(e,t,a){"use strict";a.d(t,{W:function(){return n}});var s=a(7437),r=a(3448);function n(e){let{children:t,className:a,...n}=e;return(0,s.jsx)("div",{className:(0,r.cn)("backdrop-blur-md bg-white/10 border border-white/20 rounded-xl shadow-xl",a),...n,children:t})}},5526:function(e,t,a){"use strict";a.d(t,{O:function(){return s}});let s=(0,a(1695).createBrowserClient)("https://zynmvmxdluevuwigbadz.supabase.co","sb_publishable_9w0K7O3Sun2zl2qIQwX33g_wGkVsy6f")},3448:function(e,t,a){"use strict";a.d(t,{cn:function(){return n}});var s=a(1994),r=a(3335);function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.m6)((0,s.W)(t))}}},function(e){e.O(0,[554,695,972,971,117,744],function(){return e(e.s=1353)}),_N_E=e.O()}]);