(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[665],{1911:function(e,t,a){Promise.resolve().then(a.bind(a,2404))},1047:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9763).Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},4630:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9763).Z)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]])},9397:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9763).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},3247:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9763).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},8906:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9763).Z)("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]])},4413:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9763).Z)("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2v0a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12v0a2 2 0 0 1-2-2V7",key:"jon5kx"}]])},8930:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9763).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},5805:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9763).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},7648:function(e,t,a){"use strict";a.d(t,{default:function(){return r.a}});var s=a(2972),r=a.n(s)},9376:function(e,t,a){"use strict";var s=a(5475);a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}})},2404:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return g}});var s=a(7437),r=a(2265),i=a(5526),n=a(2593),c=a(9376),l=a(7648),d=a(8906),o=a(9397),x=a(3247),h=a(4413),u=a(5805),m=a(1047),b=a(4630),f=a(8930);function g(){let e=(0,c.useRouter)(),[t,a]=(0,r.useState)([]),[g,v]=(0,r.useState)(!0),[p,y]=(0,r.useState)(""),[j,N]=(0,r.useState)("all");(0,r.useEffect)(()=>{k(),w()},[]);let k=async()=>{let{data:{user:t}}=await i.O.auth.getUser();if(!t){e.push("/auth");return}let{data:a}=await i.O.from("profiles").select("role").eq("id",t.id).single();a&&"admin"===a.role||e.push("/auth")},w=async()=>{v(!0);let{data:e,error:t}=await i.O.from("barbershops").select("*").order("created_at",{ascending:!1});if(t){console.error("Error fetching barbershops:",t),v(!1);return}a(await Promise.all((e||[]).map(async e=>{let[t,a]=await Promise.all([i.O.from("barbers").select("*",{count:"exact",head:!0}).eq("barbershop_id",e.id),i.O.from("barbershop_bookings").select("*",{count:"exact",head:!0}).eq("barbershop_id",e.id)]);return{...e,barber_count:t.count||0,booking_count:a.count||0}}))),v(!1)},_=async(e,t)=>{await i.O.from("barbershops").update({is_active:!t}).eq("id",e),a(a=>a.map(a=>a.id===e?{...a,is_active:!t}:a))},Z=async e=>{confirm("Tem certeza que deseja excluir esta barbearia? Esta a\xe7\xe3o n\xe3o pode ser desfeita.")&&(await i.O.from("barbershops").delete().eq("id",e),a(t=>t.filter(t=>t.id!==e)))},C=t.filter(e=>{var t,a;let s=e.name.toLowerCase().includes(p.toLowerCase())||e.slug.toLowerCase().includes(p.toLowerCase())||null!==(a=null===(t=e.city)||void 0===t?void 0:t.toLowerCase().includes(p.toLowerCase()))&&void 0!==a&&a,r="all"===j||"active"===j&&e.is_active||"inactive"===j&&!e.is_active;return s&&r});return g?(0,s.jsx)("div",{className:"min-h-screen bg-dark-bg flex items-center justify-center",children:(0,s.jsx)("div",{className:"text-gold text-xl",children:"Carregando barbearias..."})}):(0,s.jsxs)("div",{className:"min-h-screen bg-dark-bg",children:[(0,s.jsx)("header",{className:"bg-dark-card border-b border-white/10 px-8 py-4",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto flex justify-between items-center",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(d.Z,{className:"text-gold",size:28}),(0,s.jsx)("h1",{className:"text-2xl font-bold text-white",children:"FOC Barber Admin"})]}),(0,s.jsxs)("nav",{className:"flex gap-6",children:[(0,s.jsx)(l.default,{href:"/admin",className:"text-gray-400 hover:text-white transition",children:"Dashboard"}),(0,s.jsx)(l.default,{href:"/admin/barbershops",className:"text-gold font-medium",children:"Barbearias"}),(0,s.jsx)(l.default,{href:"/admin/users",className:"text-gray-400 hover:text-white transition",children:"Usu\xe1rios"}),(0,s.jsx)(l.default,{href:"/admin/financial",className:"text-gray-400 hover:text-white transition",children:"Financeiro"})]})]})}),(0,s.jsxs)("main",{className:"max-w-7xl mx-auto p-8",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Barbearias"}),(0,s.jsx)("p",{className:"text-gray-400 mt-1",children:"Gerencie todas as barbearias do sistema"})]}),(0,s.jsxs)(l.default,{href:"/admin/barbershops/new",className:"flex items-center gap-2 bg-gold text-black px-6 py-3 rounded-lg font-medium hover:bg-gold/90 transition",children:[(0,s.jsx)(o.Z,{size:20}),"Nova Barbearia"]})]}),(0,s.jsxs)("div",{className:"flex gap-4 mb-6",children:[(0,s.jsxs)("div",{className:"flex-1 relative",children:[(0,s.jsx)(x.Z,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500",size:20}),(0,s.jsx)("input",{type:"text",placeholder:"Buscar por nome, slug ou cidade...",value:p,onChange:e=>y(e.target.value),className:"w-full bg-dark-card border border-white/10 rounded-lg pl-12 pr-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-gold/50"})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{onClick:()=>N("all"),className:"px-4 py-2 rounded-lg transition ".concat("all"===j?"bg-gold text-black":"bg-dark-card text-gray-400 hover:text-white"),children:"Todas"}),(0,s.jsx)("button",{onClick:()=>N("active"),className:"px-4 py-2 rounded-lg transition ".concat("active"===j?"bg-green-500 text-white":"bg-dark-card text-gray-400 hover:text-white"),children:"Ativas"}),(0,s.jsx)("button",{onClick:()=>N("inactive"),className:"px-4 py-2 rounded-lg transition ".concat("inactive"===j?"bg-red-500 text-white":"bg-dark-card text-gray-400 hover:text-white"),children:"Inativas"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-8",children:[(0,s.jsxs)(n.W,{className:"p-4",children:[(0,s.jsx)("div",{className:"text-gray-400 text-sm",children:"Total"}),(0,s.jsx)("div",{className:"text-2xl font-bold text-white",children:t.length})]}),(0,s.jsxs)(n.W,{className:"p-4",children:[(0,s.jsx)("div",{className:"text-gray-400 text-sm",children:"Ativas"}),(0,s.jsx)("div",{className:"text-2xl font-bold text-green-400",children:t.filter(e=>e.is_active).length})]}),(0,s.jsxs)(n.W,{className:"p-4",children:[(0,s.jsx)("div",{className:"text-gray-400 text-sm",children:"Inativas"}),(0,s.jsx)("div",{className:"text-2xl font-bold text-red-400",children:t.filter(e=>!e.is_active).length})]})]}),(0,s.jsx)("div",{className:"space-y-4",children:0===C.length?(0,s.jsxs)(n.W,{className:"p-12 text-center",children:[(0,s.jsx)(h.Z,{className:"mx-auto text-gray-500 mb-4",size:64}),(0,s.jsx)("h3",{className:"text-xl font-bold text-white mb-2",children:"Nenhuma barbearia encontrada"}),(0,s.jsx)("p",{className:"text-gray-400 mb-6",children:p?"Tente ajustar sua busca":"Comece cadastrando a primeira barbearia"}),!p&&(0,s.jsxs)(l.default,{href:"/admin/barbershops/new",className:"inline-flex items-center gap-2 bg-gold text-black px-6 py-3 rounded-lg font-medium hover:bg-gold/90 transition",children:[(0,s.jsx)(o.Z,{size:20}),"Cadastrar Barbearia"]})]}):C.map(e=>(0,s.jsx)(n.W,{className:"p-6",children:(0,s.jsxs)("div",{className:"flex justify-between items-start",children:[(0,s.jsxs)("div",{className:"flex items-start gap-4",children:[(0,s.jsx)("div",{className:"w-16 h-16 bg-gold/20 rounded-xl flex items-center justify-center",children:(0,s.jsx)(h.Z,{className:"text-gold",size:32})}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("h3",{className:"text-xl font-bold text-white",children:e.name}),(0,s.jsx)("span",{className:"px-3 py-1 rounded-full text-xs ".concat(e.is_active?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"),children:e.is_active?"Ativo":"Inativo"})]}),(0,s.jsxs)("p",{className:"text-gray-400 text-sm mt-1",children:["/",e.slug," â€¢ ",e.city||"Sem cidade",", ",e.state||"N/A"]}),(0,s.jsxs)("div",{className:"flex gap-6 mt-3 text-sm",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-gray-400",children:[(0,s.jsx)(u.Z,{size:16}),(0,s.jsxs)("span",{children:[e.barber_count," barbeiros"]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 text-gray-400",children:[(0,s.jsx)(m.Z,{size:16}),(0,s.jsxs)("span",{children:[e.booking_count," agendamentos"]})]})]})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(l.default,{href:"/admin/barbershops/".concat(e.id),className:"p-2 rounded-lg bg-white/5 hover:bg-white/10 transition text-gray-400 hover:text-white",children:(0,s.jsx)(b.Z,{size:18})}),(0,s.jsx)("button",{onClick:()=>_(e.id,e.is_active),className:"px-3 py-2 rounded-lg text-sm transition ".concat(e.is_active?"bg-red-500/20 text-red-400 hover:bg-red-500/30":"bg-green-500/20 text-green-400 hover:bg-green-500/30"),children:e.is_active?"Desativar":"Ativar"}),(0,s.jsx)("button",{onClick:()=>Z(e.id),className:"p-2 rounded-lg bg-red-500/10 hover:bg-red-500/20 transition text-red-400",children:(0,s.jsx)(f.Z,{size:18})})]})]})},e.id))})]})]})}},2593:function(e,t,a){"use strict";a.d(t,{W:function(){return i}});var s=a(7437),r=a(3448);function i(e){let{children:t,className:a,...i}=e;return(0,s.jsx)("div",{className:(0,r.cn)("backdrop-blur-md bg-white/10 border border-white/20 rounded-xl shadow-xl",a),...i,children:t})}},5526:function(e,t,a){"use strict";a.d(t,{O:function(){return s}});let s=(0,a(1695).createBrowserClient)("https://zynmvmxdluevuwigbadz.supabase.co","sb_publishable_9w0K7O3Sun2zl2qIQwX33g_wGkVsy6f")},3448:function(e,t,a){"use strict";a.d(t,{cn:function(){return i}});var s=a(1994),r=a(3335);function i(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.m6)((0,s.W)(t))}}},function(e){e.O(0,[554,695,972,971,117,744],function(){return e(e.s=1911)}),_N_E=e.O()}]);