(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[684],{9436:function(e,t,s){Promise.resolve().then(s.bind(s,7022))},401:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},9397:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},8930:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},7648:function(e,t,s){"use strict";s.d(t,{default:function(){return r.a}});var a=s(2972),r=s.n(a)},7022:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return b}});var a=s(7437),r=s(2265),l=s(5526),n=s(2593),i=s(2920),c=s(9397),d=s(9763);let o=(0,d.Z)("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);var u=s(8930);let h=(0,d.Z)("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);var x=s(401),m=s(7648);function b(){var e;let[t,s]=(0,r.useState)([]),[d,b]=(0,r.useState)(!0),[f,p]=(0,r.useState)(!1),[g,v]=(0,r.useState)({benefits:[""]});(0,r.useEffect)(()=>{w()},[]);let w=async()=>{let{data:{user:e}}=await l.O.auth.getUser();if(!e)return;let{data:t}=await l.O.from("membership_plans").select("*").eq("barber_id",e.id);t&&s(t),b(!1)},j=async()=>{let{data:{user:e}}=await l.O.auth.getUser();if(!e)return;let t={...g,barber_id:e.id,price:Number(g.price)};g.id?await l.O.from("membership_plans").update(t).eq("id",g.id):await l.O.from("membership_plans").insert([t]),p(!1),v({benefits:[""]}),w()},N=async e=>{confirm("Tem certeza?")&&(await l.O.from("membership_plans").delete().eq("id",e),w())},y=(e,t)=>{let s=[...g.benefits||[]];s[e]=t,v({...g,benefits:s})};return(0,a.jsx)("div",{className:"min-h-screen bg-dark-bg p-8",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,a.jsxs)("header",{className:"flex justify-between items-center mb-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(m.default,{href:"/barber",className:"text-gray-400 hover:text-white text-sm mb-2 block",children:"â† Voltar ao Dashboard"}),(0,a.jsx)("h1",{className:"text-3xl font-bold text-white",children:"Planos de Assinatura"}),(0,a.jsx)("p",{className:"text-gray-400",children:"Crie clubes de fidelidade para seus clientes"})]}),(0,a.jsxs)(i.g,{className:"w-auto flex items-center gap-2",onClick:()=>p(!0),children:[(0,a.jsx)(c.Z,{className:"w-4 h-4"})," Novo Plano"]})]}),f&&(0,a.jsxs)(n.W,{className:"p-6 mb-8 border-gold/30",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-white mb-4",children:g.id?"Editar Plano":"Novo Plano"}),(0,a.jsxs)("div",{className:"grid gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm text-gray-400 mb-1",children:"Nome do Plano"}),(0,a.jsx)("input",{type:"text",value:g.name||"",onChange:e=>v({...g,name:e.target.value}),className:"w-full bg-white/5 border border-white/10 rounded p-2 text-white",placeholder:"Ex: Clube VIP"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm text-gray-400 mb-1",children:"Pre\xe7o Mensal (R$)"}),(0,a.jsx)("input",{type:"number",value:g.price||"",onChange:e=>v({...g,price:Number(e.target.value)}),className:"w-full bg-white/5 border border-white/10 rounded p-2 text-white",placeholder:"0.00"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm text-gray-400 mb-1",children:"Benef\xedcios"}),null===(e=g.benefits)||void 0===e?void 0:e.map((e,t)=>(0,a.jsx)("div",{className:"flex gap-2 mb-2",children:(0,a.jsx)("input",{type:"text",value:e,onChange:e=>y(t,e.target.value),className:"w-full bg-white/5 border border-white/10 rounded p-2 text-white",placeholder:"Ex: Cortes ilimitados"})},t)),(0,a.jsx)("button",{onClick:()=>{v({...g,benefits:[...g.benefits||[],""]})},className:"text-sm text-gold hover:underline",children:"+ Adicionar Benef\xedcio"})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-2 mt-4",children:[(0,a.jsx)("button",{onClick:()=>p(!1),className:"px-4 py-2 text-gray-400 hover:text-white",children:"Cancelar"}),(0,a.jsx)(i.g,{className:"w-auto",onClick:j,children:"Salvar Plano"})]})]})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:t.map(e=>{var t;return(0,a.jsxs)(n.W,{className:"p-6 relative group hover:border-gold/50 transition-colors",children:[(0,a.jsxs)("div",{className:"absolute top-4 right-4 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,a.jsx)("button",{onClick:()=>{v(e),p(!0)},className:"p-2 bg-white/10 rounded-full hover:bg-white/20",children:(0,a.jsx)(o,{className:"w-4 h-4 text-white"})}),(0,a.jsx)("button",{onClick:()=>N(e.id),className:"p-2 bg-red-500/10 rounded-full hover:bg-red-500/20",children:(0,a.jsx)(u.Z,{className:"w-4 h-4 text-red-400"})})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,a.jsx)("div",{className:"p-3 bg-gold/10 rounded-xl",children:(0,a.jsx)(h,{className:"w-6 h-6 text-gold"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-white",children:e.name}),(0,a.jsxs)("p",{className:"text-gold font-bold",children:["R$ ",e.price.toFixed(2),(0,a.jsx)("span",{className:"text-gray-400 text-sm font-normal",children:"/m\xeas"})]})]})]}),(0,a.jsx)("ul",{className:"space-y-2",children:null===(t=e.benefits)||void 0===t?void 0:t.map((e,t)=>(0,a.jsxs)("li",{className:"flex items-center gap-2 text-gray-300 text-sm",children:[(0,a.jsx)(x.Z,{className:"w-3 h-3 text-green-400"})," ",e]},t))})]},e.id)})})]})})}},2593:function(e,t,s){"use strict";s.d(t,{W:function(){return l}});var a=s(7437),r=s(3448);function l(e){let{children:t,className:s,...l}=e;return(0,a.jsx)("div",{className:(0,r.cn)("backdrop-blur-md bg-white/10 border border-white/20 rounded-xl shadow-xl",s),...l,children:t})}},2920:function(e,t,s){"use strict";s.d(t,{g:function(){return n}});var a=s(7437),r=s(3448);let l=(0,s(9763).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);function n(e){let{children:t,className:s,isLoading:n,disabled:i,...c}=e;return(0,a.jsxs)("button",{disabled:i||n,className:(0,r.cn)("w-full bg-gradient-to-r from-[#D4AF37] to-[#F2D06B] text-black font-bold py-3 px-6 rounded-lg shadow-lg hover:shadow-gold/50 transition-all active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",s),...c,children:[n&&(0,a.jsx)(l,{className:"mr-2 h-4 w-4 animate-spin"}),t]})}},5526:function(e,t,s){"use strict";s.d(t,{O:function(){return a}});let a=(0,s(1695).createBrowserClient)("https://zynmvmxdluevuwigbadz.supabase.co","sb_publishable_9w0K7O3Sun2zl2qIQwX33g_wGkVsy6f")},3448:function(e,t,s){"use strict";s.d(t,{cn:function(){return l}});var a=s(1994),r=s(3335);function l(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.m6)((0,a.W)(t))}}},function(e){e.O(0,[554,695,972,971,117,744],function(){return e(e.s=9436)}),_N_E=e.O()}]);